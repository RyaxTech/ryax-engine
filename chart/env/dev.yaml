global:
  # -- Override the container registry globaly. Useful to use development using registry.ryax.org/dev or for airgapped env
  imageRegistry: registry.ryax.org/dev
  imagePullSecrets:
    - ryax-dev-pull-secret
  imagePullPolicy: IfNotPresent

  nodeSelector: {}
  # -- Leave empty to use the default storage class
  defaultStorageClass: ""

  # -- Ryax specific configuration
  ryax:
    # -- Global log level, can be overriden locally
    logLevel: debugryax-dev-pull-secret
    # -- Namespace where user's actions are deployed
    userNamespace: "ryaxns-execs"
    # -- Where the monitoring stack goes
    monitoringNamespace: "ryaxns-monitoring"

  monitoring:
    enabled: false

  tls:
    enabled: false
    # environment: "development" # development or production
    # hostname: "local.ryax.io" # must be a valid dns address
    # Shared but static:
    # datastoreSecret: ryax-datastore-secret
    # internalRegistry: ryax-registry:5000
    # actionRegistrySecret: ryax-registry-creds-secret
    # brokerSecret: ryax-broker-secret
    # authorizationUrl: ryax-authorization:8080
    # filestoreName: ryax-filestore
    # filestoreSecret: ryax-minio-secret
    # internalRegistry: 127.0.0.1:30012
    # jwtSecret: api-jwt-secret-key

  # -- Needed by bitnami to avoid https://github.com/bitnami/charts/issues/30850
  security:
    allowInsecureImages: true

# -- All common configuration and secrets are created here
common-resources:
  certManager:
    enabled: false

registry:
  ingress:
    enabled: false
  persistence:
    enabled: true
    pvcSize: 20Gi
  priorityClass: backbone
  
datastore:
  pvcSize: 2Gi
  priorityClass: backbone
  
front:
  enabled: true

action-builder:
  priorityClass: "microservices"

runner:
  priorityClass: microservices

worker:
  config:
    site:
      name: local
      spec:
        namespace: "{{ .Values.global.ryax.userNamespace }}"
        nodePools:
        - cpu: 4
          memory: 8G
          name: default
          selector:
            node.kubernetes.io/instance-type: k3s
      type: KUBERNETES
  loki:
    monitoring:
      serviceMonitor:
        enabled: false
    singleBinary:
      persistence:
        size: 10Gi
        storageClass: local-path
  priorityClass: microservices
  promtail:
    serviceMonitor:
      enabled: false
  intelliscale:
    enabled: false
    
intelliscale:
  enabled: true
  priorityClass: microservices

minio:
  metrics:
    enabled: false
  priorityClassName: backbone

rabbitmq:
  metrics:
    enabled: false
    serviceMonitor:
      enabled: false
  persistence:
    enabled: false

prometheus:
  enabled: false

tempo:
  enabled: false
